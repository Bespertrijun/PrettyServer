import{d as w,r as i,m as R,n as x,c as n,o as r,i as o,b as l,w as c,e as u,t as E,E as B,j as D,g as G,G as O,B as k,C as F,H as U,I as T,J as W,v as M,x as v,_ as j}from"./index-CW49KeDn.js";const z={class:"logs-page"},H={class:"page-header"},J={class:"header-actions"},S={class:"logs-container"},$={class:"log-time"},q={class:"log-level"},K={class:"log-module"},P={class:"log-message"},Q={key:0,class:"no-logs"},X=w({__name:"Logs",setup(Y){const _=i([]),g=i(!1),m=i(100),d=i("ALL"),p=s=>{const a=/^(\d{4}-\d{2}-\d{2} \d{2}:\d{2}:\d{2}) - ([^:]+:\d+) - (\w+) - (.+)$/,e=s.match(a);return e?{time:e[1],module:e[2],level:e[3],message:e[4]}:{time:"",module:"",level:"",message:s}},C=s=>{switch(s){case"DEBUG":return"log-debug";case"INFO":return"log-info";case"WARNING":return"log-warning";case"ERROR":return"log-error";case"CRITICAL":return"log-critical";default:return"log-default"}},f=R(()=>d.value==="ALL"?_.value:_.value.filter(s=>p(s).level===d.value)),I=R(()=>f.value.map(s=>p(s))),h=async()=>{g.value=!0;try{const s=await E.getLogs(m.value);_.value=s.logs.reverse()}catch(s){console.error("获取日志失败:",s),B.error("获取日志失败: "+s.message)}finally{g.value=!1}};return x(h),(s,a)=>{const e=u("el-option"),L=u("el-select"),b=u("el-icon"),N=u("el-button"),y=u("el-card"),A=F("loading");return r(),n("div",z,[o("div",H,[a[3]||(a[3]=o("h1",null,"日志管理",-1)),o("div",J,[l(L,{modelValue:d.value,"onUpdate:modelValue":a[0]||(a[0]=t=>d.value=t),placeholder:"日志级别",style:{width:"120px"}},{default:c(()=>[l(e,{label:"全部",value:"ALL"}),l(e,{label:"DEBUG",value:"DEBUG"}),l(e,{label:"INFO",value:"INFO"}),l(e,{label:"WARNING",value:"WARNING"}),l(e,{label:"ERROR",value:"ERROR"}),l(e,{label:"CRITICAL",value:"CRITICAL"})]),_:1},8,["modelValue"]),l(L,{modelValue:m.value,"onUpdate:modelValue":a[1]||(a[1]=t=>m.value=t),placeholder:"日志行数",style:{width:"120px"}},{default:c(()=>[l(e,{label:"100行",value:100}),l(e,{label:"500行",value:500}),l(e,{label:"1000行",value:1e3})]),_:1},8,["modelValue"]),l(N,{type:"primary",onClick:h},{default:c(()=>[l(b,null,{default:c(()=>[l(G(O))]),_:1}),a[2]||(a[2]=D(" 刷新 ",-1))]),_:1})])]),l(y,null,{default:c(()=>[k((r(),n("div",S,[(r(!0),n(T,null,W(I.value,(t,V)=>(r(),n("div",{key:V,class:M(["log-line",C(t.level)])},[o("span",$,v(t.time),1),o("span",q,v(t.level),1),o("span",K,v(t.module),1),o("span",P,v(t.message),1)],2))),128)),f.value.length===0?(r(),n("div",Q," 暂无日志记录 ")):U("",!0)])),[[A,g.value]])]),_:1})])}}}),ee=j(X,[["__scopeId","data-v-f44c0acf"]]);export{ee as default};
